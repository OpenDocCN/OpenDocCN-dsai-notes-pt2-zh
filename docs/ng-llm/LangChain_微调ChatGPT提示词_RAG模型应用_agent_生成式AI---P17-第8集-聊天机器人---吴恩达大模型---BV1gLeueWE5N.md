# LangChain_微调ChatGPT提示词_RAG模型应用_agent_生成式AI - P17：第8集 聊天机器人 - 吴恩达大模型 - BV1gLeueWE5N

![](img/4ee0d715c8ac1e68d3ab5051d5440971_0.png)

大型语言模型的激动之处在于，只需少量努力，即可构建定制聊天机器人，Chat GPT Web界面是让您拥有自然交互的方式。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_2.png)

通过大型语言模型创作。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_4.png)

但酷的是，也可用大型语言模型构建定制聊天机器人。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_6.png)

或扮演AI客服或餐厅AI点餐员。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_8.png)

本视频将教您如何为自己做到这一点，将更详细地描述OpenAI聊天完成格式的组件。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_10.png)

![](img/4ee0d715c8ac1e68d3ab5051d5440971_11.png)

然后您将自己构建聊天机器人，那么让我们开始吧，首先，我们像往常一样设置openai Python包，因此，像chat cbt这样的聊天模型实际上被训练为接受一系列消息作为输入。

并返回一个模型生成的消息作为输出，虽然聊天格式旨在使这样的多轮对话容易，但我们在之前的视频中已经看到，它同样也适用于没有对话的单项任务，接下来，我们将定义两个辅助函数。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_13.png)

这是我们一直在所有视频中使用的，这是获取完成函数。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_15.png)

但若仔细看，我们给出一个提示，但在函数内部，实际上我们是在将提示放入，看起来像用户消息的东西，这是因为聊天CBT模型是一个聊天模型，这意味着它被训练成以一系列消息为输入，然后返回模型生成的消息输出。

用户消息是输入。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_17.png)

然后助手消息是输出。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_19.png)

在这视频中，将使用不同助手函数，而非输入单一提示，获取单一完成。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_21.png)

将传入消息列表。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_23.png)

这些消息可来自不同角色。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_25.png)

我将描述这些，这是消息列表示例，首条消息为系统消息，给出总体指示，此消息后为，用户与助手间的对话轮换，此过程将持续进行，如果你用过聊天CBT网页界面，那么你的消息就是用户消息。

然后ChatGPT的消息就是助手消息，系统消息有助于设定助手的行为和个性，它作为对话的高级指令，你可以把它想象成在助手的耳边低语，并在用户不知情的情况下引导其回复。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_27.png)

所以作为用户，如果你用过ChatGPT，你可能不知道ChatGPT的系统消息是什么，这就是意图所在，系统消息的好处，是它为你提供了一种方式，来构建对话，而不使请求本身，成为对话的一部分。

所以你可以引导助手。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_29.png)

并在它耳边低语。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_31.png)

引导其回应而不让用户察觉。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_33.png)

所以现在让我们试着在对话中使用这些消息，我们将使用新的助手函数获取消息的完成，并且我们也在使用更高的温度。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_35.png)

系统消息说你是一个像莎士比亚一样说话的助手。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_37.png)

所以这是我们向助手描述它应该如何表现，然后第一个用户消息告诉我一个笑话。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_39.png)

下一个为什么鸡要过马路，然后最后一个用户消息是，我不知道，所以如果我们运行这个，回答是到另一边，让我们再试一次，到另一边。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_41.png)

首先莎拉夫人是一个古老经典，永不过时。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_43.png)

所以有一个莎士比亚式的回应，让我们实际上再试一件事，因为我想要让它更清楚，嗯，整个消息响应。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_45.png)

![](img/4ee0d715c8ac1e68d3ab5051d5440971_46.png)

所以只是为了让它更清楚，嗯，这个回应是助手消息，所以角色是助手，然后内容是消息本身。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_48.png)

所以这就是这个助手函数的作用，我们只是在传递消息的内容。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_50.png)

![](img/4ee0d715c8ac1e68d3ab5051d5440971_51.png)

所以现在让我们再做另一个例子，所以这里我们的消息是，系统消息是，你是一个友好的聊天机器人，第一个用户消息是嗨，我的名字是伊萨，我们想，获取第一个用户消息，所以让我们为第一个助手消息执行这个。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_53.png)

所以第一条消息是你好伊萨，很高兴见到你。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_55.png)

今天我能为你做些什么。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_57.png)

现在让我们再试另一个例子，所以这里我们的消息是，嗯，系统消息。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_59.png)

你是一个友好的聊天机器人，和第一条用户消息，是的，你能提醒我什么，什么，我的名字是什么，让我们获取响应，正如你所见，模型实际上不知道我的名字。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_61.png)

与语言模型的每次对话都是独立的交互，这意味着您必须提供所有相关消息，以便模型在当前对话中引用。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_63.png)

如果您希望模型引用，或换句话说，记住对话的早期部分，您必须在模型的输入中提供早期的交流，因此，我们将称这为上下文，所以让我们试试这个。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_65.png)

所以现在我们已经给了模型需要的上下文。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_67.png)

嗯，之前消息中我的名字是什么，我们将问同样的问题。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_69.png)

所以我们将问我的名字是什么，模型能够响应，因为它拥有所有需要的上下文，嗯，在我们输入给它的这种消息列表中。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_71.png)

所以现在您将构建自己的聊天机器人，这个聊天机器人将被称为autobot，我们将自动化收集用户提示和助手响应，为了构建这个autobot，它将接受比萨店的订单，所以首先我们将定义这个辅助函数。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_73.png)

它正在做的是，它将收集我们的用户消息，这样我们就不必手动输入它们，就像我们上面所做的那样。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_75.png)

这将从下面构建的用户界面中收集提示，然后将其附加到名为context的列表中，然后每次都会用该上下文调用模型，模型响应随后也被添加到上下文中，因此，模型消息被添加到上下文中，用户消息被添加到上下文中。

等等，所以它变得越来越长。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_77.png)

这样，模型就有了决定下一步要做什么的信息，所以现在，我们将设置并运行这种ui来显示autobots。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_79.png)

这是上下文，它包含包含菜单的系统消息，请注意每次我们调用语言模型，我们都会使用相同的上下文，并且上下文随着时间的推移而建立。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_81.png)

![](img/4ee0d715c8ac1e68d3ab5051d5440971_82.png)

然后让我们执行这个。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_84.png)

好的，我要说声你好，我想订比萨，助手说很好，您想订哪种比萨，我们有辣香肠芝士和茄子比萨。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_86.png)

嗯，它们多少钱。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_88.png)

很好，好的，我们有价格，我想点中份茄子比萨，比萨。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_90.png)

![](img/4ee0d715c8ac1e68d3ab5051d5440971_91.png)

所以你可以想象，我们可以继续对话。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_93.png)

让我们看看系统消息里放了什么，您致力于自动服务以收集比萨店的订单，您首先问候顾客，然后收集订单，然后询问是自取还是送货，您等待收集整个订单，然后总结并再次确认，如果顾客想添加其他东西，如果是送货。

您可以询问地址，最后收取付款，确保澄清所有选项，额外和尺寸以唯一标识菜单上的项目。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_95.png)

您是个点，您以简短，非常对话，友好的风格回复菜单包括，然后这里是菜单。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_97.png)

所以让我们回到我们的对话。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_99.png)

嗯，让我们看看助手是否遵循了指令。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_101.png)

好的很好，助手问我们是否想要配料，我们在系统消息中提到过。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_103.png)

所以我想我们不要额外配料。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_105.png)

当然没问题还有别的吗，嗯。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_107.png)

让我们来点水，实际上，薯条。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_109.png)

小份还是大份。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_111.png)

这很好因为我们。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_113.png)

嗯，在系统消息中要求助手澄清额外和配菜，所以您明白了，请随时自己尝试。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_115.png)

![](img/4ee0d715c8ac1e68d3ab5051d5440971_116.png)

谢谢。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_118.png)

嗯，可以暂停视频，然后在左侧笔记本中运行。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_120.png)

现在可让模型创建JSON总结，基于对话发送给订单系统的，现在添加另一个系统消息，这是一个指令，说创建之前食品订单的JSON总结，列出每项的价格，字段应为一比萨，包括配菜，两个配料列表，三个饮料列表。

四个配菜列表，最后是总价。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_122.png)

你还可以使用用户消息。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_124.png)

这不必是系统消息，所以让我们执行这个并注意这次使用较低温度。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_126.png)

因为对于这类任务，我们希望输出相当可预测，对于对话代理，你可能想使用更高温度，但在这个情况下我也许会使用较低温度。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_128.png)

因为对于客户助理聊天板。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_130.png)

你可能希望输出更可预测。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_132.png)

所以这是我们订单的总结，因此我们可以将其提交给订单系统。

![](img/4ee0d715c8ac1e68d3ab5051d5440971_134.png)

如果我们想的话，所以就这样，你已构建自己的订单聊天机器人，随意自定义它，并玩转系统消息以改变聊天机器人的行为。



![](img/4ee0d715c8ac1e68d3ab5051d5440971_136.png)